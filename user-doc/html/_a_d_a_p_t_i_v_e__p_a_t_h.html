<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>PLUMED: ADAPTIVE_PATH</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script>
   var redpath = "";
   
   function showPath(eg,name) {
     var i; var y = document.getElementsByName(redpath);
     for (i=0; i < y.length; i++ ) { y[i].style.color="black"; }
     var x = document.getElementsByName(name); redpath=name;
     for (i = 0; i < x.length; i++) { x[i].style.color="red"; }
     var valid="value_details_".concat(eg);
     var valueField = document.getElementById(valid);
     var dataField = document.getElementById(name);
     valueField.innerHTML = dataField.innerHTML;
   }
   function swapInput(name) {
     var btn = document.getElementById(name + "_button");
     var mydiv = document.getElementById("input_" + name);
     if( btn.textContent=="expand shortcuts" ) {
         btn.textContent = "contract shortcuts";
         var dataField = document.getElementById(name + "long");
         mydiv.innerHTML = dataField.innerHTML;
     } else if( btn.textContent=="contract shortcuts" ) {
         btn.textContent = "expand shortcuts";
         var dataField = document.getElementById(name + "short");
         mydiv.innerHTML = dataField.innerHTML;
     }
   }
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table align="center" frame="void" width="98%" cellpadding="2%">
<tbody>
<tr style="height: 30px;">
<td valign="center"> &nbsp; <img src="pigeon.png" width="120"/></td>
<td style="padding-left: 0.2em;" width="74%"> <a href="http://www.plumed.org"> <img src="logo.png" width="400" /> </td>
<td style="padding-left: 0.2em;" align="right"> <a href="../../developer-doc/html/index.html"> <img src="user-logo.png" width="180" /> </a> </td>
</tr>
</tbody>
</table>
<!--
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PLUMED
   &#160;<span id="projectnumber">2.11.0-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
-->
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_a_d_a_p_t_i_v_e__p_a_t_h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ADAPTIVE_PATH </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><table align="center" frame="void" width="95%%" celpadding="5%%">
<tr>
<td width="60%%"></td><td><b> This is part of the mapping <a class="el" href="mymodules.html">module </a></b>   </td></tr>
<tr>
<td width="60%%"></td><td><b> It is only available if you configure PLUMED with ./configure &ndash;enable-modules=mapping . Furthermore, this feature is still being developed so take care when using it and report any problems on the mailing list.</b>   </td></tr>
</table>
<p>Compute path collective variables that adapt to the lowest free energy path connecting states A and B.</p>
<p>The Path Collective Variables developed by Branduardi and co-workers <a class="el" href="citelist.html#CITEREF_brand07">[24]</a> allow one to compute the progress along a high-dimensional path and the distance from the high-dimensional path. The progress along the path (s) is computed using:</p>
<p class="formulaDsp">
\[ s = i_2 + \textrm{sign}(i_2-i_1) \frac{ \sqrt{( \mathbf{v}_1\cdot\mathbf{v}_2 )^2 - |\mathbf{v}_3|^2(|\mathbf{v}_1|^2 - |\mathbf{v}_2|^2) } }{2|\mathbf{v}_3|^2} - \frac{\mathbf{v}_1\cdot\mathbf{v}_3 - |\mathbf{v}_3|^2}{2|\mathbf{v}_3|^2} \]
</p>
<p>In this expression \(\mathbf{v}_1\) and \(\mathbf{v}_3\) are the vectors connecting the current position to the closest and second closest node of the path, respectfully and \(i_1\) and \(i_2\) are the projections of the closest and second closest frames of the path. \(\mathbf{v}_2\), meanwhile, is the vector connecting the closest frame to the second closest frame. The distance from the path, \(z\) is calculated using:</p>
<p class="formulaDsp">
\[ z = \sqrt{ \left[ |\mathbf{v}_1|^2 - |\mathbf{v}_2| \left( \frac{ \sqrt{( \mathbf{v}_1\cdot\mathbf{v}_2 )^2 - |\mathbf{v}_3|^2(|\mathbf{v}_1|^2 - |\mathbf{v}_2|^2) } }{2|\mathbf{v}_3|^2} - \frac{\mathbf{v}_1\cdot\mathbf{v}_3 - |\mathbf{v}_3|^2}{2|\mathbf{v}_3|^2} \right) \right]^2 } \]
</p>
<p>Notice that these are the definitions of \(s\) and \(z\) that are used by <a class="el" href="_p_a_t_h.html">PATH</a> when the GPATH option is employed. The reason for this is that the adaptive path method implemented in this action was inspired by the work of Diaz and Ensing in which these formula were used <a class="el" href="citelist.html#CITEREF_BerndAdaptivePath">[66]</a>. To learn more about how the path is adapted we strongly recommend reading this paper.</p>
<dl class="section user"><dt>Examples</dt><dd></dd></dl>
<p>The input below provides an example that shows how the adaptive path works. The path is updated every 50 steps of MD based on the data accumulated during the preceding 50 time steps.</p>

<div style="width: 80%; float:left" id="value_details_eg1"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><button type="button" id="eg1_button" onclick='swapInput("eg1")'>contract shortcuts</button></div><div style="width: 10%; float:left"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested on master" /></div><div style="width: 100%; float:left" id="input_eg1"></div>
<pre style="width: 97%;" class="fragment"></pre>
<script type="text/javascript">
if (window.addEventListener) { // Mozilla, Netscape, Firefox
    window.addEventListener('load', eg1Load, false);
} else if (window.attachEvent) { // IE
    window.attachEvent('onload', eg1Load);
}
function eg1Load(event) {
       swapInput("eg1");
}
</script>
<div style="display:none;" id="eg1short">
<pre style="width: 97%;" class="fragment">
<b name="eg1shortd1" onclick='showPath("eg1","eg1shortd1")'>d1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e.html" style="color:green">DISTANCE</a> <div class="tooltip">ATOMS<div class="right">the pair of atom that we are calculating the distance between. <i></i></div></div>=1,2 <div class="tooltip">COMPONENTS<div class="right">( default=off ) calculate the x, y and z components of the distance separately and
store them as label.x, <i></i></div></div> <span style="display:none;" id="eg1shortd1">The DISTANCE action with label <b>d1</b> calculates the following quantities:
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr><td width="5%%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr>
<tr><td width="5%%">d1.x</td><td>the x-component of the vector connecting the two atoms</td></tr>
<tr><td width="5%%">d1.y</td><td>the y-component of the vector connecting the two atoms</td></tr>
<tr><td width="5%%">d1.z</td><td>the z-component of the vector connecting the two atoms</td></tr>
</table>
</span>
<b name="eg1shortpp" onclick='showPath("eg1","eg1shortpp")'>pp: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_a_d_a_p_t_i_v_e__p_a_t_h.html" style="color:green">ADAPTIVE_PATH</a> <div class="tooltip">TYPE<div class="right"><b>compulsory keyword ( default=OPTIMAL-FAST )</b>
the manner in which distances are calculated. <i></i></div></div>=EUCLIDEAN <div class="tooltip">FIXED<div class="right"><b>compulsory keyword </b>
the positions in the list of input frames of the two path nodes whose positions remain
fixed during the path optimization <i></i></div></div>=2,5 <div class="tooltip">UPDATE<div class="right"><b>compulsory keyword </b>
the frequency with which the path should be updated <i></i></div></div>=50 <div class="tooltip">WFILE<div class="right">file on which to write out the path <i></i></div></div>=out-path.pdb <div class="tooltip">WSTRIDE<div class="right"><b>compulsory keyword </b>
frequency with which to write out the path <i></i></div></div>=50 <div class="tooltip">REFERENCE<div class="right"><b>compulsory keyword </b>
a pdb file containing the set of reference configurations <i></i></div></div>=mypath.pdb <span style="display:none;" id="eg1shortpp">The ADAPTIVE_PATH action with label <b>pp</b> calculates the following quantities:
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr><td width="5%%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr>
<tr><td width="5%%">pp.s</td><td><p>In the case above the distance between frames is calculated based on the \(x\) and \(y\) components of the vector connecting atoms 1 and 2. As such an extract from the input reference path (mypath.pdb) would look as follows:</p>
<pre class="fragment">REMARK ARG=d1.x,d1.y d1.x=1.12 d1.y=-.60
END
REMARK ARG=d1.x,d1.y d1.x=.99 d1.y=-.45
END
REMARK ARG=d1.x,d1.y d1.x=.86 d1.y=-.30
END
REMARK ARG=d1.x,d1.y d1.x=.73 d1.y=-.15
END
REMARK ARG=d1.x,d1.y d1.x=.60 d1.y=0
END
REMARK ARG=d1.x,d1.y d1.x=.47 d1.y=.15
END
</pre><p>Notice that one can also use RMSD frames in place of arguments like those above.</p>
<dl class="section user"><dt>Glossary of keywords and components</dt><dd></dd></dl>
<dl class="section user"><dt>Description of components</dt><dd></dd></dl>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="5%"><b> Quantity </b>  </td><td><b> Description </b>   </td></tr>
<tr>
<td width="15%"><b> .#!value </b> </td><td>the position along and from the adaptive path   </td></tr>
</table>
<dl class="section user"><dt>Compulsory keywords</dt><dd></dd></dl>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="15%"><b> REFERENCE </b> </td><td>a pdb file containing the set of reference configurations   </td></tr>
<tr>
<td width="15%"><b> TYPE </b> </td><td>( default=OPTIMAL-FAST ) the manner in which distances are calculated. More information on the different metrics that are available in PLUMED can be found in the section of the manual on <a class="el" href="dists.html">Distances from reference configurations</a>   </td></tr>
<tr>
<td width="15%"><b> FIXED </b> </td><td>the positions in the list of input frames of the two path nodes whose positions remain fixed during the path optimization   </td></tr>
<tr>
<td width="15%"><b> HALFLIFE </b> </td><td>( default=-1 ) the number of MD steps after which a previously measured path distance weighs only 50 percent in the average. This option may increase convergence by allowing to forget the memory of a bad initial guess path. The default is to set this to infinity   </td></tr>
<tr>
<td width="15%"><b> UPDATE </b> </td><td>the frequency with which the path should be updated   </td></tr>
<tr>
<td width="15%"><b> TOLERANCE </b> </td><td>( default=1E-6 ) the tolerance to use for the path updating algorithm that makes all frames equidistant   </td></tr>
<tr>
<td width="15%"><b> FMT </b> </td><td>( default=f ) the format to use for output files   </td></tr>
<tr>
<td width="15%"><b> WSTRIDE </b> </td><td>frequency with which to write out the path   </td></tr>
</table>
<dl class="section user"><dt>Options</dt><dd></dd></dl>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="15%"><b> NOPBC </b> </td><td>( default=off ) ignore the periodic boundary conditions when calculating distances   </td></tr>
<tr>
<td width="15%"><b> NOSPATH </b> </td><td>( default=off ) do not calculate the spath CV   </td></tr>
<tr>
<td width="15%"><b> NOZPATH </b> </td><td>( default=off ) do not calculate the zpath CV   </td></tr>
<tr>
<td width="15%"><b> GPATH </b> </td><td><p class="starttd">( default=off ) calculate the trigonometric path  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td width="15%"><b> ARG </b> </td><td>the list of arguments you would like to use in your definition of the path   </td></tr>
<tr>
<td width="15%"><b> COEFFICIENTS </b> </td><td>the coefficients of the displacements along each argument that should be used when calculating the euclidean distance   </td></tr>
<tr>
<td width="15%"><b> PROPERTY </b> </td><td>read in path coordinates by finding option with this label in remark of pdb frames   </td></tr>
<tr>
<td width="15%"><b> WFILE </b> </td><td>file on which to write out the path   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
<!--    <li class="navelem"><a class="el" href="colvarintro.html">Collective Variables</a></li><li class="navelem"><a class="el" href="_colvar.html">CV Documentation</a></li>  -->
    <li class="footer">   <!--- Generated by -->
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
