<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>PLUMED: FIT_TO_TEMPLATE</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script>
   var redpath = "";
   
   function showPath(eg,name) {
     var i; var y = document.getElementsByName(redpath);
     for (i=0; i < y.length; i++ ) { y[i].style.color="black"; }
     var x = document.getElementsByName(name); redpath=name;
     for (i = 0; i < x.length; i++) { x[i].style.color="red"; }
     var valid="value_details_".concat(eg);
     var valueField = document.getElementById(valid);
     var dataField = document.getElementById(name);
     valueField.innerHTML = dataField.innerHTML;
   }
   function swapInput(name) {
     var btn = document.getElementById(name + "_button");
     var mydiv = document.getElementById("input_" + name);
     if( btn.textContent=="expand shortcuts" ) {
         btn.textContent = "contract shortcuts";
         var dataField = document.getElementById(name + "long");
         mydiv.innerHTML = dataField.innerHTML;
     } else if( btn.textContent=="contract shortcuts" ) {
         btn.textContent = "expand shortcuts";
         var dataField = document.getElementById(name + "short");
         mydiv.innerHTML = dataField.innerHTML;
     }
   }
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table align="center" frame="void" width="98%" cellpadding="2%">
<tbody>
<tr style="height: 30px;">
<td valign="center"> &nbsp; <img src="pigeon.png" width="120"/></td>
<td style="padding-left: 0.2em;" width="74%"> <a href="http://www.plumed.org"> <img src="logo.png" width="400" /> </td>
<td style="padding-left: 0.2em;" align="right"> <a href="../../developer-doc/html/index.html"> <img src="user-logo.png" width="180" /> </a> </td>
</tr>
</tbody>
</table>
<!--
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PLUMED
   &#160;<span id="projectnumber">2.11.0-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
-->
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_f_i_t__t_o__t_e_m_p_l_a_t_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">FIT_TO_TEMPLATE </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><table align="center" frame="void" width="95%%" celpadding="5%%">
<tr>
<td width="70%%"></td><td><b> This is part of the generic <a class="el" href="mymodules.html">module </a></b>   </td></tr>
</table>
<p>This action is used to align a molecule to a template.</p>
<p>This can be used to move the coordinates stored in plumed so as to be aligned with a provided template in PDB format. Pdb should contain also weights for alignment (see the format of PDB files used e.g. for <a class="el" href="_r_m_s_d.html">RMSD</a>). Make sure your PDB file is correctly formatted as explained <a class="el" href="pdbreader.html">in this page</a>. Weights for displacement are ignored, since no displacement is computed here. Notice that all atoms (not only those in the template) are aligned. To see what effect try the <a class="el" href="_d_u_m_p_a_t_o_m_s.html">DUMPATOMS</a> directive to output the atomic positions.</p>
<p>Also notice that PLUMED propagate forces correctly so that you can add a bias on a CV computed after alignment. For many CVs this has no effect, but in some case the alignment can change the result. Examples are:</p><ul>
<li><a class="el" href="_p_o_s_i_t_i_o_n.html">POSITION</a> CV since it is affected by a rigid shift of the system.</li>
<li><a class="el" href="_d_i_s_t_a_n_c_e.html">DISTANCE</a> CV with COMPONENTS. Since the alignment could involve a rotation (with TYPE=OPTIMAL) the actual components could be different from the original ones.</li>
<li><a class="el" href="_c_e_l_l.html">CELL</a> components for a similar reason.</li>
<li><a class="el" href="_d_i_s_t_a_n_c_e.html">DISTANCE</a> from a <a class="el" href="_f_i_x_e_d_a_t_o_m.html">FIXEDATOM</a>, provided the fixed atom is introduced <em>after</em> the <a class="el" href="_f_i_t__t_o__t_e_m_p_l_a_t_e.html">FIT_TO_TEMPLATE</a> action.</li>
</ul>
<dl class="section attention"><dt>Attention</dt><dd>The implementation of TYPE=OPTIMAL is available but should be considered in testing phase. Please report any strange behavior.</dd>
<dd>
This directive modifies the stored position at the precise moment it is executed. This means that only collective variables which are below it in the input script will see the corrected positions. As a general rule, put it at the top of the input file. Also, unless you know exactly what you are doing, leave the default stride (1), so that this action is performed at every MD step.</dd></dl>
<p>When running with periodic boundary conditions, the atoms should be in the proper periodic image. This is done automatically since PLUMED 2.5, by considering the ordered list of atoms and rebuilding the molecules using a procedure that is equivalent to that done in <a class="el" href="_w_h_o_l_e_m_o_l_e_c_u_l_e_s.html">WHOLEMOLECULES</a> . Notice that rebuilding is local to this action. This is different from <a class="el" href="_w_h_o_l_e_m_o_l_e_c_u_l_e_s.html">WHOLEMOLECULES</a> which actually modifies the coordinates stored in PLUMED.</p>
<p>In case you want to recover the old behavior you should use the NOPBC flag. In that case you need to take care that atoms are in the correct periodic image.</p>
<dl class="section user"><dt>Examples</dt><dd></dd></dl>
<p>Align the atomic position to a template then print them. The following example is only translating the system so as to align the center of mass of a molecule to the one in the reference structure <code>ref.pdb</code>: </p>
<div style="width: 90%; float:left" id="value_details_eg1"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested on master" /></div><pre style="width: 97%;" class="fragment">
<span style="color:blue"># dump coordinates before fitting, to see the difference:</span>
<a href="https://www.plumed.org/doc-master/user-doc/html/_d_u_m_p_a_t_o_m_s.html" style="color:green">DUMPATOMS</a> <div class="tooltip">FILE<div class="right"><b>compulsory keyword </b>
file on which to output coordinates; extension is automatically detected <i></i></div></div>=dump-before.xyz <div class="tooltip">ATOMS<div class="right">the atom indices whose positions you would like to print out. <i></i></div></div>=1-20 <span style="display:none;" id="eg1">The DUMPATOMS action with label <b></b></span>
<span style="color:blue"># fit coordinates to ref.pdb template</span>
<span style="color:blue"># this is a "TYPE=SIMPLE" fit, so that only translations are used.</span>
<a href="https://www.plumed.org/doc-master/user-doc/html/_f_i_t__t_o__t_e_m_p_l_a_t_e.html" style="color:green">FIT_TO_TEMPLATE</a> <div class="tooltip">STRIDE<div class="right"><b>compulsory keyword ( default=1 )</b>
the frequency with which molecules are reassembled. <i></i></div></div>=1 <div class="tooltip">REFERENCE<div class="right"><b>compulsory keyword </b>
a file in pdb format containing the reference structure and the atoms involved in
the CV. <i></i></div></div>=ref.pdb <div class="tooltip">TYPE<div class="right"><b>compulsory keyword ( default=SIMPLE )</b>
the manner in which RMSD alignment is performed. <i></i></div></div>=SIMPLE <span style="display:none;" id="eg1">The FIT_TO_TEMPLATE action with label <b></b></span>
<span style="color:blue"># dump coordinates after fitting, to see the difference:</span>
<a href="https://www.plumed.org/doc-master/user-doc/html/_d_u_m_p_a_t_o_m_s.html" style="color:green">DUMPATOMS</a> <div class="tooltip">FILE<div class="right"><b>compulsory keyword </b>
file on which to output coordinates; extension is automatically detected <i></i></div></div>=dump-after.xyz <div class="tooltip">ATOMS<div class="right">the atom indices whose positions you would like to print out. <i></i></div></div>=1-20 <span style="display:none;" id="eg1">The DUMPATOMS action with label <b></b></span>
</pre>
<p>The following example instead performs a rototranslational fit. </p>
<div style="width: 90%; float:left" id="value_details_eg2"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested on master" /></div><pre style="width: 97%;" class="fragment">
<span style="color:blue"># dump coordinates before fitting, to see the difference:</span>
<a href="https://www.plumed.org/doc-master/user-doc/html/_d_u_m_p_a_t_o_m_s.html" style="color:green">DUMPATOMS</a> <div class="tooltip">FILE<div class="right"><b>compulsory keyword </b>
file on which to output coordinates; extension is automatically detected <i></i></div></div>=dump-before.xyz <div class="tooltip">ATOMS<div class="right">the atom indices whose positions you would like to print out. <i></i></div></div>=1-20 <span style="display:none;" id="eg2">The DUMPATOMS action with label <b></b></span>
<span style="color:blue"># fit coordinates to ref.pdb template</span>
<span style="color:blue"># this is a "TYPE=OPTIMAL" fit, so that rototranslations are used.</span>
<a href="https://www.plumed.org/doc-master/user-doc/html/_f_i_t__t_o__t_e_m_p_l_a_t_e.html" style="color:green">FIT_TO_TEMPLATE</a> <div class="tooltip">STRIDE<div class="right"><b>compulsory keyword ( default=1 )</b>
the frequency with which molecules are reassembled. <i></i></div></div>=1 <div class="tooltip">REFERENCE<div class="right"><b>compulsory keyword </b>
a file in pdb format containing the reference structure and the atoms involved in
the CV. <i></i></div></div>=ref.pdb <div class="tooltip">TYPE<div class="right"><b>compulsory keyword ( default=SIMPLE )</b>
the manner in which RMSD alignment is performed. <i></i></div></div>=OPTIMAL <span style="display:none;" id="eg2">The FIT_TO_TEMPLATE action with label <b></b></span>
<span style="color:blue"># dump coordinates after fitting, to see the difference:</span>
<a href="https://www.plumed.org/doc-master/user-doc/html/_d_u_m_p_a_t_o_m_s.html" style="color:green">DUMPATOMS</a> <div class="tooltip">FILE<div class="right"><b>compulsory keyword </b>
file on which to output coordinates; extension is automatically detected <i></i></div></div>=dump-after.xyz <div class="tooltip">ATOMS<div class="right">the atom indices whose positions you would like to print out. <i></i></div></div>=1-20 <span style="display:none;" id="eg2">The DUMPATOMS action with label <b></b></span>
</pre>
<p>In both these cases the reference structure should be provided in a reference pdb file such as the one below:</p>
<pre class="fragment">ATOM      8  HT3 ALA     2      -1.480  -1.560   1.212  1.00  1.00      DIA  H
ATOM      9  CAY ALA     2      -0.096   2.144  -0.669  1.00  1.00      DIA  C
ATOM     10  HY1 ALA     2       0.871   2.385  -0.588  1.00  1.00      DIA  H
ATOM     12  HY3 ALA     2      -0.520   2.679  -1.400  1.00  1.00      DIA  H
ATOM     14  OY  ALA     2      -1.139   0.931  -0.973  1.00  1.00      DIA  O
END
</pre><p>In the following example you see two completely equivalent way to restrain an atom close to a position that is defined in the reference frame of an aligned molecule. You could for instance use this command to calculate the position of the center of mass of a ligand after having aligned the atoms to the reference frame of the protein that is determined by aligning the atoms in the protein to the coordinates provided in the file ref.pdb </p>
<div style="width: 80%; float:left" id="value_details_eg3"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><button type="button" id="eg3_button" onclick='swapInput("eg3")'>contract shortcuts</button></div><div style="width: 10%; float:left"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested on master" /></div><div style="width: 100%; float:left" id="input_eg3"></div>
<pre style="width: 97%;" class="fragment"></pre>
<script type="text/javascript">
if (window.addEventListener) { // Mozilla, Netscape, Firefox
    window.addEventListener('load', eg3Load, false);
} else if (window.attachEvent) { // IE
    window.attachEvent('onload', eg3Load);
}
function eg3Load(event) {
       swapInput("eg3");
}
</script>
<div style="display:none;" id="eg3short">
<pre style="width: 97%;" class="fragment">
<span style="color:blue"># center of the ligand:</span>
<b name="eg3shortcenter" onclick='showPath("eg3","eg3shortcenter")'>center: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">CENTER</a> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for. <i></i></div></div>=100-110 <span style="display:none;" id="eg3shortcenter">The CENTER action with label <b>center</b> calculates the following quantities:
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr><td width="5%%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr>
<tr><td width="5%%">center.x</td><td><p>Notice that you could have obtained an (almost) identical result by adding a fictitious atom to <code>ref.pdb</code> with the serial number corresponding to the atom labelled <code>center</code> (there is no automatic way to get it, but in this example it should be the number of atoms of the system plus one), and properly setting the weights for alignment and displacement in <a class="el" href="_r_m_s_d.html">RMSD</a>. There are two differences to be expected: (ab) <a class="el" href="_f_i_t__t_o__t_e_m_p_l_a_t_e.html">FIT_TO_TEMPLATE</a> might be slower since it has to rototranslate all the available atoms and (b) variables employing periodic boundary conditions (such as <a class="el" href="_d_i_s_t_a_n_c_e.html">DISTANCE</a> without <code>NOPBC</code>, as in the example above) are allowed after <a class="el" href="_f_i_t__t_o__t_e_m_p_l_a_t_e.html">FIT_TO_TEMPLATE</a>, whereas <a class="el" href="_r_m_s_d.html">RMSD</a> expects the issues related to the periodic boundary conditions to be already solved. The latter means that before the <a class="el" href="_r_m_s_d.html">RMSD</a> statement one should use <a class="el" href="_w_r_a_p_a_r_o_u_n_d.html">WRAPAROUND</a> or <a class="el" href="_w_h_o_l_e_m_o_l_e_c_u_l_e_s.html">WHOLEMOLECULES</a> to properly place the ligand.</p>
<dl class="section user"><dt>Glossary of keywords and components</dt><dd></dd></dl>
<dl class="section user"><dt>Description of components</dt><dd></dd></dl>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="5%"><b> Quantity </b>  </td><td><b> Description </b>   </td></tr>
<tr>
<td width="15%"><b> .#!value </b> </td><td>the RMSD distance   </td></tr>
</table>
<dl class="section user"><dt>Compulsory keywords</dt><dd></dd></dl>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="15%"><b> STRIDE </b> </td><td>( default=1 ) the frequency with which molecules are reassembled. Unless you are completely certain about what you are doing leave this set equal to 1!   </td></tr>
<tr>
<td width="15%"><b> REFERENCE </b> </td><td>a file in pdb format containing the reference structure and the atoms involved in the CV.   </td></tr>
<tr>
<td width="15%"><b> TYPE </b> </td><td>( default=SIMPLE ) the manner in which RMSD alignment is performed. Should be OPTIMAL or SIMPLE.   </td></tr>
</table>
<dl class="section user"><dt>Options</dt><dd></dd></dl>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="15%"><b> NOPBC </b> </td><td><p class="starttd">( default=off ) ignore the periodic boundary conditions when calculating distances  </p>
<p class="endtd"></p>
</td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
<!--    <li class="navelem"><a class="el" href="colvarintro.html">Collective Variables</a></li><li class="navelem"><a class="el" href="_group.html">Groups and Virtual Atoms</a></li>  -->
    <li class="footer">   <!--- Generated by -->
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
