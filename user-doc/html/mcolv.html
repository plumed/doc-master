<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>PLUMED: MultiColvar</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script>
   var redpath = "";
   
   function showPath(eg,name) {
     var i; var y = document.getElementsByName(redpath);
     for (i=0; i < y.length; i++ ) { y[i].style.color="black"; }
     var x = document.getElementsByName(name); redpath=name;
     for (i = 0; i < x.length; i++) { x[i].style.color="red"; }
     var valid="value_details_".concat(eg);
     var valueField = document.getElementById(valid);
     var dataField = document.getElementById(name);
     valueField.innerHTML = dataField.innerHTML;
   }
   function swapInput(name) {
     var btn = document.getElementById(name + "_button");
     var mydiv = document.getElementById("input_" + name);
     if( btn.textContent=="expand shortcuts" ) {
         btn.textContent = "contract shortcuts";
         var dataField = document.getElementById(name + "long");
         mydiv.innerHTML = dataField.innerHTML;
     } else if( btn.textContent=="contract shortcuts" ) {
         btn.textContent = "expand shortcuts";
         var dataField = document.getElementById(name + "short");
         mydiv.innerHTML = dataField.innerHTML;
     }
   }
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table align="center" frame="void" width="98%" cellpadding="2%">
<tbody>
<tr style="height: 30px;">
<td valign="center"> &nbsp; <img src="pigeon.png" width="120"/></td>
<td style="padding-left: 0.2em;" width="74%"> <a href="http://www.plumed.org"> <img src="logo.png" width="400" /> </td>
<td style="padding-left: 0.2em;" align="right"> <a href="../../developer-doc/html/index.html"> <img src="user-logo.png" width="180" /> </a> </td>
</tr>
</tbody>
</table>
<!--
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PLUMED
   &#160;<span id="projectnumber">2.11.0-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
-->
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('mcolv.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MultiColvar </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Oftentimes, when you do not need one of the collective variables described elsewhere in the manual, what you want instead is a function of a distribution of collective variables of a particular type. In other words, you would like to calculate a function something like this: </p><p class="formulaDsp">
\[ s = \sum_i g[f(\{X\}_i)] \]
</p>
<p> In this expression \(g\) is a function that takes in one argument and \(f\) is a function that takes a set of atomic positions as argument. The symbol \(\{X\}_i\) is used to indicate the fact that the function \(f\) is evaluated for a number of different sets of atoms. If you would just like to output the values of all the various \(f\) functions you should use the command <a class="el" href="_d_u_m_p_m_u_l_t_i_c_o_l_v_a_r.html">DUMPMULTICOLVAR</a></p>
<p>This functionality is useful if you need to calculate a minimum distance or the number of coordination numbers greater than a 3.0. <br  />
 To avoid duplicating the code to calculate an angle or distance many times and to make it easier to implement very complex collective variables PLUMED provides these sort of collective variables using so-called MultiColvars. MultiColvars are named in this way because a single PLUMED action can be used to calculate a number of different collective variables. For instance the <a class="el" href="_d_i_s_t_a_n_c_e_s.html">DISTANCES</a> action can be used to calculate the minimum distance, the number of distances less than a certain value, the number of distances within a certain range... A more detailed introduction to multicolvars is provided in this <a href="http://www.youtube.com/watch?v=iDvZmbWE5ps">10-minute video</a>. Descriptions of the various multicolvars that are implemented in PLUMED 2 are given below:</p>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="5%"><a class="el" href="_a_l_p_h_a_b_e_t_a.html">ALPHABETA</a>  </td><td>Calculate the alpha beta CV  </td></tr>
<tr>
<td width="5%"><a class="el" href="_a_r_o_u_n_d__c_a_l_c.html">AROUND_CALC</a>  </td><td>Calculate a vector from the input positions with elements equal to one when the positions are in a particular part of the cell and elements equal to zero otherwise  </td></tr>
<tr>
<td width="5%"><a class="el" href="_a_t_o_m_i_c__s_m_a_c.html">ATOMIC_SMAC</a>  </td><td>Calculate the atomic smac CV  </td></tr>
<tr>
<td width="5%"><a class="el" href="_b_r_i_d_g_e.html">BRIDGE</a>  </td><td>Calculate a matrix with elements equal to one if there is a bridging atom between the two atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_b_r_i_d_g_e__m_a_t_r_i_x.html">BRIDGE_MATRIX</a>  </td><td>Calculate the number of atoms that bridge two parts of a structure  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_a_v_i_t_y__c_a_l_c.html">CAVITY_CALC</a>  </td><td>Calculate a vector from the input positions with elements equal to one when the positions are in a particular part of the cell and elements equal to zero otherwise  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_h_a_r_g_e.html">CHARGE</a>  </td><td>Get the charges of one or multiple atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_h_a_r_g_e__s_c_a_l_a_r.html">CHARGE_SCALAR</a>  </td><td>Get the charges of one or multiple atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_h_a_r_g_e__v_e_c_t_o_r.html">CHARGE_VECTOR</a>  </td><td>Get the charges of one or multiple atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_o_n_c_a_t_e_n_a_t_e.html">CONCATENATE</a>  </td><td>Join vectors or matrices together  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n_n_u_m_b_e_r.html">COORDINATIONNUMBER</a>  </td><td>Calculate the coordination numbers of atoms so that you can then calculate functions of the distribution of coordination numbers such as the minimum, the number less than a certain quantity and so on.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n__m_o_m_e_n_t_s.html">COORDINATION_MOMENTS</a>  </td><td>Calculate moments of the distribution of distances in the first coordination sphere  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n__s_h_e_l_l__a_v_e_r_a_g_e.html">COORDINATION_SHELL_AVERAGE</a>  </td><td>Calculate an arbitrary function of all the bond vectors in the first coordination sphere of an atom and take an average  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n__s_h_e_l_l__f_u_n_c_t_i_o_n.html">COORDINATION_SHELL_FUNCTION</a>  </td><td>Calculate an arbitrary function of all the bond vectors in the first coordination sphere of an atom  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_o_o_r_d__a_n_g_l_e_s.html">COORD_ANGLES</a>  </td><td>Calculate all the angles between bonds in the first coordination spheres of a set of atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_y_l_i_n_d_r_i_c_a_l__h_a_r_m_o_n_i_c.html">CYLINDRICAL_HARMONIC</a>  </td><td>Calculate the cylindrical harmonic function  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_y_l_i_n_d_r_i_c_a_l__h_a_r_m_o_n_i_c__m_a_t_r_i_x.html">CYLINDRICAL_HARMONIC_MATRIX</a>  </td><td>Calculate the cylindrical harmonic function from the elements in two input matrices  </td></tr>
<tr>
<td width="5%"><a class="el" href="_d_e_n_s_i_t_y.html">DENSITY</a>  </td><td>Depreciated command that is bascially equivalant to GROUP.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_d_e_t_e_r_m_i_n_a_n_t.html">DETERMINANT</a>  </td><td>Calculate the determinant of a matrix  </td></tr>
<tr>
<td width="5%"><a class="el" href="_d_i_p_o_l_e__v_e_c_t_o_r.html">DIPOLE_VECTOR</a>  </td><td>Calculate a vector of dipole moments for a set of groups of atoms.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_d_i_s_p_l_a_c_e_m_e_n_t.html">DISPLACEMENT</a>  </td><td>Calculate the displacement vector between the pair of input vectors  </td></tr>
<tr>
<td width="5%"><a class="el" href="_d_i_s_t_a_n_c_e_s.html">DISTANCES</a>  </td><td>Calculate the distances between multiple piars of atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_d_i_s_t_a_n_c_e__s_c_a_l_a_r.html">DISTANCE_SCALAR</a>  </td><td>Calculate the distance between a pair of atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_d_i_s_t_a_n_c_e__v_e_c_t_o_r.html">DISTANCE_VECTOR</a>  </td><td>Calculate a vector containing the distances between various pairs of atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_d_u_m_p_m_u_l_t_i_c_o_l_v_a_r.html">DUMPMULTICOLVAR</a>  </td><td>Basically equivalent to DUMPATOMS  </td></tr>
<tr>
<td width="5%"><a class="el" href="_e_n_v_i_r_o_n_m_e_n_t_s_i_m_i_l_a_r_i_t_y.html">ENVIRONMENTSIMILARITY</a>  </td><td>Measure how similar the environment around atoms is to that found in some reference crystal structure.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_e_u_c_l_i_d_e_a_n__d_i_s_t_a_n_c_e.html">EUCLIDEAN_DISTANCE</a>  </td><td>Calculate the euclidean distance between two vectors of arguments  </td></tr>
<tr>
<td width="5%"><a class="el" href="_f_c_c_u_b_i_c.html">FCCUBIC</a>  </td><td>Measure how similar the environment around atoms is to that found in a FCC structure.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_f_c_c_u_b_i_c__f_u_n_c.html">FCCUBIC_FUNC</a>  </td><td>Measure how similar the environment around atoms is to that found in a FCC structure.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_f_c_c_u_b_i_c__f_u_n_c__m_a_t_r_i_x.html">FCCUBIC_FUNC_MATRIX</a>  </td><td>Measure how similar the environment around atoms is to that found in a FCC structure.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_g_r_a_d_i_e_n_t.html">GRADIENT</a>  </td><td>Calculate the gradient of an input grid  </td></tr>
<tr>
<td width="5%"><a class="el" href="_g_y_r_a_t_i_o_n__t_e_n_s_o_r.html">GYRATION_TENSOR</a>  </td><td>Calculate the gyration tensor using a user specified vector of weights  </td></tr>
<tr>
<td width="5%"><a class="el" href="_h_e_x_a_c_t_i_c__p_a_r_a_m_e_t_e_r.html">HEXACTIC_PARAMETER</a>  </td><td>Calculate the hexatic order parameter  </td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_c_y_l_i_n_d_e_r__c_a_l_c.html">INCYLINDER_CALC</a>  </td><td>Calculate a vector from the input positions with elements equal to one when the positions are in a particular part of the cell and elements equal to zero otherwise  </td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_p_l_a_n_e_d_i_s_t_a_n_c_e_s.html">INPLANEDISTANCES</a>  </td><td>Calculate the distance between a pair of atoms in the plane  </td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_s_p_h_e_r_e__c_a_l_c.html">INSPHERE_CALC</a>  </td><td>Calculate a vector from the input positions with elements equal to one when the positions are in a particular part of the cell and elements equal to zero otherwise  </td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_v_e_r_t__m_a_t_r_i_x.html">INVERT_MATRIX</a>  </td><td>Calculate the inverse of the input matrix  </td></tr>
<tr>
<td width="5%"><a class="el" href="_l_o_c_a_l__c_r_y_s_t_a_l_i_n_i_t_y.html">LOCAL_CRYSTALINITY</a>  </td><td>Calculate the local crystalinity symmetry function  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_a_s_s.html">MASS</a>  </td><td>Get the mass of one or multiple atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_a_s_s__s_c_a_l_a_r.html">MASS_SCALAR</a>  </td><td>Get the mass of one or multiple atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_a_s_s__v_e_c_t_o_r.html">MASS_VECTOR</a>  </td><td>Get the mass of one or multiple atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_a_t_r_i_x__p_r_o_d_u_c_t.html">MATRIX_PRODUCT</a>  </td><td>Calculate the product of two matrices  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_a_t_r_i_x__v_e_c_t_o_r__p_r_o_d_u_c_t.html">MATRIX_VECTOR_PRODUCT</a>  </td><td>Calculate the product of the matrix and the vector  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_f_i_l_t_e_r__l_e_s_s.html">MFILTER_LESS</a>  </td><td>Basically equivalent to LESS_THAN.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_m_f_i_l_t_e_r__m_o_r_e.html">MFILTER_MORE</a>  </td><td>Basically equivalent to MORE_THAN.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_n_e_i_g_h_b_o_r_s.html">NEIGHBORS</a>  </td><td>Build a matrix with ones in for the N nearest neighbours of an atom  </td></tr>
<tr>
<td width="5%"><a class="el" href="_p_a_i_r_e_n_t_r_o_p_i_e_s.html">PAIRENTROPIES</a>  </td><td>Calculate the KL entropy from the RDF around each of the atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_p_a_i_r_e_n_t_r_o_p_y.html">PAIRENTROPY</a>  </td><td>Calculate the KL Entropy from the radial distribution function  </td></tr>
<tr>
<td width="5%"><a class="el" href="_p_l_a_n_e_s.html">PLANES</a>  </td><td>Calculate the components of the normal to the plane containing three atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_q1.html">Q1</a>  </td><td>Calculate 1st order Steinhardt parameters  </td></tr>
<tr>
<td width="5%"><a class="el" href="_q3.html">Q3</a>  </td><td>Calculate 3rd order Steinhardt parameters.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_q4.html">Q4</a>  </td><td>Calculate fourth order Steinhardt parameters.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_q6.html">Q6</a>  </td><td>Calculate sixth order Steinhardt parameters.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_q_u_a_t_e_r_n_i_o_n__b_o_n_d__p_r_o_d_u_c_t__m_a_t_r_i_x.html">QUATERNION_BOND_PRODUCT_MATRIX</a>  </td><td>Calculate the product between a matrix of quaternions and the bonds  </td></tr>
<tr>
<td width="5%"><a class="el" href="_q_u_a_t_e_r_n_i_o_n__p_r_o_d_u_c_t__m_a_t_r_i_x.html">QUATERNION_PRODUCT_MATRIX</a>  </td><td>Calculate the outer product matrix from two vectors of quaternions  </td></tr>
<tr>
<td width="5%"><a class="el" href="_s_e_c_o_n_d_a_r_y__s_t_r_u_c_t_u_r_e__r_m_s_d.html">SECONDARY_STRUCTURE_RMSD</a>  </td><td>Calclulate the distance between segments of a protein and a reference structure of interest  </td></tr>
<tr>
<td width="5%"><a class="el" href="_s_i_m_p_l_e_c_u_b_i_c.html">SIMPLECUBIC</a>  </td><td>Calculate whether or not the coordination spheres of atoms are arranged as they would be in a simple cubic structure.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_s_m_a_c.html">SMAC</a>  </td><td>Calculate the SMAC order parameter for a set of molecules  </td></tr>
<tr>
<td width="5%"><a class="el" href="_s_p_h_e_r_i_c_a_l__h_a_r_m_o_n_i_c.html">SPHERICAL_HARMONIC</a>  </td><td>Calculate the values of all the spherical harmonic funtions for a particular value of l.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_s_p_h_e_r_i_c_a_l__h_a_r_m_o_n_i_c__m_a_t_r_i_x.html">SPHERICAL_HARMONIC_MATRIX</a>  </td><td>Calculate the values of all the spherical harmonic funtions for a particular value of l for all the elements of a set of three input matrices  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_e_t_r_a_h_e_d_r_a_l.html">TETRAHEDRAL</a>  </td><td>Calculate the degree to which the environment about ions has a tetrahedral order.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_e_t_r_a_h_e_d_r_a_l_p_o_r_e__c_a_l_c.html">TETRAHEDRALPORE_CALC</a>  </td><td>Calculate a vector from the input positions with elements equal to one when the positions are in a particular part of the cell and elements equal to zero otherwise  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_e_t_r_a__a_n_g_u_l_a_r.html">TETRA_ANGULAR</a>  </td><td>Calculate the angular tetra CV  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_e_t_r_a__r_a_d_i_a_l.html">TETRA_RADIAL</a>  </td><td>Calculate the radial tetra CV  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_o_r_s_i_o_n_s.html">TORSIONS</a>  </td><td>Calculate whether or not a set of torsional angles are within a particular range.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_o_r_s_i_o_n_s__m_a_t_r_i_x.html">TORSIONS_MATRIX</a>  </td><td>Calculate the matrix of torsions between two vectors of molecules  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_o_r_s_i_o_n__v_e_c_t_o_r.html">TORSION_VECTOR</a>  </td><td>Calculate multiple torsional angles.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_r_a_n_s_p_o_s_e.html">TRANSPOSE</a>  </td><td>Calculate the transpose of a matrix  </td></tr>
<tr>
<td width="5%"><a class="el" href="_u_w_a_l_l_s.html">UWALLS</a>  </td><td>Add lower walls to a vector of quantities  </td></tr>
<tr>
<td width="5%"><a class="el" href="_v_o_r_o_n_o_i.html">VORONOI</a>  </td><td>Do a voronoi analysis  </td></tr>
<tr>
<td width="5%"><a class="el" href="_v_s_t_a_c_k.html">VSTACK</a>  </td><td>Create a matrix by stacking vectors together  </td></tr>
<tr>
<td width="5%"><a class="el" href="_x_d_i_s_t_a_n_c_e_s.html">XDISTANCES</a>  </td><td>Calculate the x components of the vectors connecting one or many pairs of atoms.You can then calculate functions of the distribution of values such as the minimum, the number less than a certain quantity and so on.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_y_d_i_s_t_a_n_c_e_s.html">YDISTANCES</a>  </td><td>Calculate the y components of the vectors connecting one or many pairs of atoms.You can then calculate functions of the distribution of values such as the minimum, the number less than a certain quantity and so on.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_z_d_i_s_t_a_n_c_e_s.html">ZDISTANCES</a>  </td><td>Calculate the z components of the vectors connecting one or many pairs of atoms.You can then calculate functions of the distribution of values such as the minimum, the number less than a certain quantity and so on.  </td></tr>
</table>
<p>To instruct PLUMED to calculate a multicolvar you give an instruction that looks something like this:</p>
<pre class="fragment">NAME &lt;atoms involved&gt; &lt;parameters&gt; &lt;what am I calculating&gt; TOL=0.001 LABEL=label
</pre><p>Oftentimes the simplest way to specify the atoms involved is to use multiple instances of the ATOMS keyword i.e. ATOMS1, ATOMS2, ATOMS3,... Separate instances of the quantity specified by NAME are then calculated for each of the sets of atoms. For example if the command issued contains the following:</p>

<div style="width: 90%; float:left" id="value_details_eg1"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><img src="https://img.shields.io/badge/master-failed-red.svg" alt="tested on master" /></div><pre style="width: 97%;" class="fragment">
<a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e_s.html" style="color:green">DISTANCES</a> <div class="tooltip">ATOMS1<div class="right">the pairs of atoms that you would like to calculate the angles for. <i></i></div></div>=1,2 <div class="tooltip">ATOMS2<div class="right">the pairs of atoms that you would like to calculate the angles for. <i></i></div></div>=3,4 <div class="tooltip">ATOMS3<div class="right">the pairs of atoms that you would like to calculate the angles for. <i></i></div></div>=5,6 <span style="display:none;" id="eg1"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
</pre>
<p>The distances between atoms 1 and 2, atoms 3 and 4, and atoms 5 and 6 are calculated. Obviously, generating this sort of input is rather tedious so short cuts are also available many of the collective variables. These are described on the manual pages for the actions.</p>
<p>After specifying the atoms involved you sometimes need to specify some parameters that required in the calculation. For instance, for <a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n_n_u_m_b_e_r.html">COORDINATIONNUMBER</a> - the number of atoms in the first coordination sphere of each of the atoms in the system - you need to specify the parameters for a <a class="el" href="switchingfunction.html">switchingfunction</a> that will tell us whether or not an atom is in the first coordination sphere. Details as to how to do this are provided on the manual pages. <br  />
</p>
<p>One of the most important keywords for multicolvars is the TOL keyword. This specifies that terms in sums that contribute less than a certain value can be ignored. In addition, it is assumed that the derivative with respect to these terms are essentially zero. By increasing the TOL parameter you can increase the speed of the calculation. Be aware, however, that this increase in speed is only possible because you are lowering the accuracy with which you are computing the quantity of interest.</p>
<p>Once you have specified the base quantities that are to be calculated from the atoms involved and any parameters you need to specify what function of these base quantities is to be calculated. For most multicolvars you can calculate the minimum, the number less than a target value, the number within a certain range, the number more than a target value and the average value directly. <br  />
</p>
<h1><a class="anchor" id="multicolvarfunction"></a>
MultiColvar functions</h1>
<p>It is possible to use multicolvars to calculate complicated collective variables by exploiting the fact that the output from one multicolvar can be used as input to a second multicolvar. One simple way of exploiting this functionality is to filter the atoms based on the value they have for a symmetry function. For example you might want to consider only those atoms that with a <a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n_n_u_m_b_e_r.html">COORDINATIONNUMBER</a> higher that a certain threshold when calculating some particularly expensive symmetry function such as <a class="el" href="_q6.html">Q6</a>. The following methods can thus all be used to filter the values of multicolvars in this way:</p>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
</table>
<p>An alternative way of filtering atoms is to consider only those atoms in a particular part of the simulation box. This can be done by exploiting the following methods</p>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="5%"><a class="el" href="_a_r_o_u_n_d.html">AROUND</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms that lie in a particular, user-specified part of of the cell.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_c_a_v_i_t_y.html">CAVITY</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms that lie in a box defined by the positions of four atoms.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_c_y_l_i_n_d_e_r.html">INCYLINDER</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms that lie in a particular, user-specified part of of the cell.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_e_n_v_e_l_o_p_e.html">INENVELOPE</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms that lie in a region where the density of a certain type of atom is high.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_e_n_v_e_l_o_p_e__c_a_l_c.html">INENVELOPE_CALC</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms that lie in a region where the density of a certain type of atom is high.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_i_n_s_p_h_e_r_e.html">INSPHERE</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms that lie in a particular, user-specified part of of the cell.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_t_e_t_r_a_h_e_d_r_a_l_p_o_r_e.html">TETRAHEDRALPORE</a>  </td><td>This quantity can be used to calculate functions of the distribution of collective variables for the atoms lie that lie in a box defined by the positions of four atoms at the corners of a tetrahedron.  </td></tr>
</table>
<p>The idea with these methods is that function of the form: </p><p class="formulaDsp">
\[ s = \sum_i w(\{X\}_i) g[f(\{X\}_i)] \]
</p>
<p> can be evaluated where once again \(g\) is a function with one argument and \(g\) is a function of a set of atomic positions. <br  />
 The difference from the more general function described earlier is that we now have a weight \(w\) which is again a function of the atomic positions. This weight varies between zero and one and it is this weight that is calculated in the list of filtering methods and volume methods described in the lists above. <br  />
</p>
<p>In addition to these volume and filtering methods it is also possible to calculate the local average of a quantities in the manner described in <a class="el" href="citelist.html#CITEREF_dellago-q6">[65]</a> using the <a class="el" href="_l_o_c_a_l__a_v_e_r_a_g_e.html">LOCAL_AVERAGE</a> method. Furthermore, in many cases <a class="el" href="_q6.html">Q6</a>, MOLECULES and <a class="el" href="_p_l_a_n_e_s.html">PLANES</a> the symmetry function being evaluated is a vector. You can thus construct a variety of novel collective variables by taking dot products of vectors on adjacent atoms as described below:</p>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="5%"><a class="el" href="_l_o_c_a_l__a_v_e_r_a_g_e.html">LOCAL_AVERAGE</a>  </td><td>Calculate averages over spherical regions centered on atoms  </td></tr>
<tr>
<td width="5%"><a class="el" href="_l_o_c_a_l__q1.html">LOCAL_Q1</a>  </td><td>Calculate the local degree of order around an atoms by taking the average dot product between the q_1 vector on the central atom and the q_3 vector on the atoms in the first coordination sphere.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_l_o_c_a_l__q3.html">LOCAL_Q3</a>  </td><td>Calculate the local degree of order around an atoms by taking the average dot product between the q_3 vector on the central atom and the q_3 vector on the atoms in the first coordination sphere.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_l_o_c_a_l__q4.html">LOCAL_Q4</a>  </td><td>Calculate the local degree of order around an atoms by taking the average dot product between the q_4 vector on the central atom and the q_4 vector on the atoms in the first coordination sphere.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_l_o_c_a_l__q6.html">LOCAL_Q6</a>  </td><td>Calculate the local degree of order around an atoms by taking the average dot product between the q_6 vector on the central atom and the q_6 vector on the atoms in the first coordination sphere.  </td></tr>
<tr>
<td width="5%"><a class="el" href="_p_a_m_m.html">PAMM</a>  </td><td>Probabilistic analysis of molecular motifs.  </td></tr>
</table>
<p>The final set of functions that you can apply on multicolvars are functions that transform all the colvars calculated using a multicolvar using a function. This can be useful if you are calculating some complicated derived quantity of some simpler quantity. It is also useful if you are calculating a Willard Chandler surface or a histogram. The actions that you can use to perform these transforms are:</p>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
</table>
<h1><a class="anchor" id="multicolvarbias"></a>
MultiColvar bias</h1>
<p>There may be occasions when you want add restraints on many collective variables. For instance if you are studying a cluster you might want to add a wall on the distances between each of the atoms and the center of mass of the cluster in order to prevent the cluster subliming. Alternatively, you may wish to insist that a particular set of atoms in your system all have a coordination number greater than 2. You can add these sorts of restraints by employing the following biases, which all act on the set of collective variable values calculated by a multicolvar. So for example the following set of commands:</p>

<div style="width: 80%; float:left" id="value_details_eg2"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><button type="button" id="eg2_button" onclick='swapInput("eg2")'>contract shortcuts</button></div><div style="width: 10%; float:left"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested on master" /></div><div style="width: 100%; float:left" id="input_eg2"></div>
<pre style="width: 97%;" class="fragment"></pre>
<script type="text/javascript">
if (window.addEventListener) { // Mozilla, Netscape, Firefox
    window.addEventListener('load', eg2Load, false);
} else if (window.attachEvent) { // IE
    window.attachEvent('onload', eg2Load);
}
function eg2Load(event) {
       swapInput("eg2");
}
</script>
<div style="display:none;" id="eg2short">
<pre style="width: 97%;" class="fragment">
<b name="eg2shortc1" onclick='showPath("eg2","eg2shortc1")'>c1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_c_o_m.html" style="color:green">COM</a> <div class="tooltip">ATOMS<div class="right">the list of atoms which are involved the virtual atom's definition. <i></i></div></div>=1-20 <span style="display:none;" id="eg2shortc1">The COM action with label <b>c1</b> calculates the following quantities:
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr><td width="5%%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr>
<tr><td width="5%%">c1.x</td><td>the x coordinate of the virtual atom</td></tr>
<tr><td width="5%%">c1.y</td><td>the y coordinate of the virtual atom</td></tr>
<tr><td width="5%%">c1.z</td><td>the z coordinate of the virtual atom</td></tr>
<tr><td width="5%%">c1.mass</td><td>the mass of the virtual atom</td></tr>
<tr><td width="5%%">c1.charge</td><td>the charge of the virtual atom</td></tr>
</table>
</span>
<b name="eg2shortd1" onclick='showPath("eg2","eg2shortd1")'>d1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_d_i_s_t_a_n_c_e_s.html" style="color:green">DISTANCES</a> <div class="tooltip">GROUPA<div class="right">Calculate the distances between all the atoms in GROUPA and all the atoms in GROUPB.
<i></i></div></div>=<b name="eg2shortc1">c1</b> <div class="tooltip">GROUPB<div class="right">Calculate the distances between all the atoms in GROUPA and all the atoms in GROUPB.
<i></i></div></div>=1-20 <span style="display:none;" id="eg2shortd1">The DISTANCES action with label <b>d1</b> calculates a single scalar value</span>
<b name="eg2shortsr" onclick='showPath("eg2","eg2shortsr")'>sr: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_u_w_a_l_l_s.html" style="color:green">UWALLS</a> <div class="tooltip">DATA<div class="right"><b>compulsory keyword </b>
the values you want to restrain <i></i></div></div>=<b name="eg2shortd1">d1</b> <div class="tooltip">AT<div class="right"><b>compulsory keyword </b>
the radius of the sphere <i></i></div></div>=2.5 <div class="tooltip">KAPPA<div class="right"><b>compulsory keyword </b>
the force constant for the wall. <i></i></div></div>=0.2 <span style="display:none;" id="eg2shortsr">The UWALLS action with label <b>sr</b></span>
</pre>
</div>
<div style="display:none;" id="eg2long"><pre style="width: 97%;" class="fragment">
<b name="eg2longc1" onclick='showPath("eg2","eg2longc1")'>c1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_c_o_m.html" style="color:green">COM</a> <div class="tooltip">ATOMS<div class="right">the list of atoms which are involved the virtual atom's definition. <i></i></div></div>=1-20 <span style="display:none;" id="eg2longc1">The COM action with label <b>c1</b> calculates the following quantities:
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr><td width="5%%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr>
<tr><td width="5%%">c1.x</td><td>the x coordinate of the virtual atom</td></tr>
<tr><td width="5%%">c1.y</td><td>the y coordinate of the virtual atom</td></tr>
<tr><td width="5%%">c1.z</td><td>the z coordinate of the virtual atom</td></tr>
<tr><td width="5%%">c1.mass</td><td>the mass of the virtual atom</td></tr>
<tr><td width="5%%">c1.charge</td><td>the charge of the virtual atom</td></tr>
</table>
</span>
<b name="eg2longd1_vatom1" onclick='showPath("eg2","eg2longd1_vatom1")'>d1_vatom1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_c_e_n_t_e_r.html" style="color:green">CENTER</a> <div class="tooltip">ATOMS<div class="right">the group of atoms that you are calculating the Gyration Tensor for. <i></i></div></div>=<b name="eg2longc1">c1</b>,1 <span style="display:none;" id="eg2longd1_vatom1">The CENTER action with label <b>d1_vatom1</b> calculates the following quantities:
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr><td width="5%%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr>
<tr><td width="5%%">d1_vatom1.x</td><td><p>creates the aforementioned set of restraints on the distances between the 20 atoms in a cluster and the center of mass of the cluster.</p>
<p>The list of biases of this type are as follows:</p>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
</table>
<p>Notice that (in theory) you could also use this functionality to add additional terms to your force field or to implement your force field.</p>
<h1><a class="anchor" id="usingbase"></a>
Extracting all the base quantities</h1>
<p>There may be occasions where you want to get information on all the individual colvar values that you have calculated. For example you might want to output the values of all the coordination numbers calculated by a <a class="el" href="_c_o_o_r_d_i_n_a_t_i_o_n_n_u_m_b_e_r.html">COORDINATIONNUMBER</a> action. You can thus use the following command to extract this sort of information, <a class="el" href="_d_u_m_p_m_u_l_t_i_c_o_l_v_a_r.html">DUMPMULTICOLVAR</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
<!--    <li class="navelem"><a class="el" href="colvarintro.html">Collective Variables</a></li>  -->
    <li class="footer">   <!--- Generated by -->
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
