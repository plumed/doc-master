<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>PLUMED: OPT_AVERAGED_SGD</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script>
   var redpath = "";
   
   function showPath(eg,name) {
     var i; var y = document.getElementsByName(redpath);
     for (i=0; i < y.length; i++ ) { y[i].style.color="black"; }
     var x = document.getElementsByName(name); redpath=name;
     for (i = 0; i < x.length; i++) { x[i].style.color="red"; }
     var valid="value_details_".concat(eg);
     var valueField = document.getElementById(valid);
     var dataField = document.getElementById(name);
     valueField.innerHTML = dataField.innerHTML;
   }
   function swapInput(name) {
     var btn = document.getElementById(name + "_button");
     var mydiv = document.getElementById("input_" + name);
     if( btn.textContent=="expand shortcuts" ) {
         btn.textContent = "contract shortcuts";
         var dataField = document.getElementById(name + "long");
         mydiv.innerHTML = dataField.innerHTML;
     } else if( btn.textContent=="contract shortcuts" ) {
         btn.textContent = "expand shortcuts";
         var dataField = document.getElementById(name + "short");
         mydiv.innerHTML = dataField.innerHTML;
     }
   }
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table align="center" frame="void" width="98%" cellpadding="2%">
<tbody>
<tr style="height: 30px;">
<td valign="center"> &nbsp; <img src="pigeon.png" width="120"/></td>
<td style="padding-left: 0.2em;" width="74%"> <a href="http://www.plumed.org"> <img src="logo.png" width="400" /> </td>
<td style="padding-left: 0.2em;" align="right"> <a href="../../developer-doc/html/index.html"> <img src="user-logo.png" width="180" /> </a> </td>
</tr>
</tbody>
</table>
<!--
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PLUMED
   &#160;<span id="projectnumber">2.11.0-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
-->
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_o_p_t__a_v_e_r_a_g_e_d__s_g_d.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">OPT_AVERAGED_SGD </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><table align="center" frame="void" width="95%%" celpadding="5%%">
<tr>
<td width="60%%"></td><td><b> This is part of the ves <a class="el" href="mymodules.html">module </a></b>   </td></tr>
<tr>
<td width="60%%"></td><td><b> It is only available if you configure PLUMED with ./configure &ndash;enable-modules=ves . Furthermore, this feature is still being developed so take care when using it and report any problems on the mailing list.</b>   </td></tr>
</table>
<p>Averaged stochastic gradient decent with fixed step size.</p>
<dl class="section user"><dt>Algorithm</dt><dd></dd></dl>
<p>This optimizer updates the coefficients according to the averaged stochastic gradient decent algorithm described in ref <a class="el" href="citelist.html#CITEREF_Bach-NIPS-2013">[9]</a>. This algorithm considers two sets of coefficients, the so-called instantaneous coefficients that are updated according to the recursion formula given by </p><p class="formulaDsp">
\[ \boldsymbol{\alpha}^{(n+1)} = \boldsymbol{\alpha}^{(n)} - \mu \left[ \nabla \Omega(\bar{\boldsymbol{\alpha}}^{(n)}) + \mathbf{H}(\bar{\boldsymbol{\alpha}}^{(n)}) [\boldsymbol{\alpha}^{(n)}-\bar{\boldsymbol{\alpha}}^{(n)}] \right], \]
</p>
<p> where \(\mu\) is a fixed step size and the gradient \( \nabla\Omega(\bar{\boldsymbol{\alpha}}^{(n)})\) and the Hessian \(\mathbf{H}(\bar{\boldsymbol{\alpha}}^{(n)})\) depend on the averaged coefficients defined as </p><p class="formulaDsp">
\[ \bar{\boldsymbol{\alpha}}^{(n)} = \frac{1}{n+1} \sum_{k=0}^{n} \boldsymbol{\alpha}^{(k)}. \]
</p>
<p> This means that the bias acting on the system depends on the averaged coefficients \(\bar{\boldsymbol{\alpha}}^{(n)}\) which leads to a smooth convergence of the bias and the estimated free energy surface. Furthermore, this allows for a rather short sampling time for each iteration, for classical MD simulations typical sampling times are on the order of few ps (around 1000-4000 MD steps).</p>
<p>Currently it is only supported to employ the diagonal part of the Hessian which is generally sufficient. Support for employing the full Hessian will be added later on.</p>
<p>The VES bias that is to be optimized should be specified using the BIAS keyword. The fixed step size \(\mu\) is given using the STEPSIZE keyword. The frequency of updating the coefficients is given using the STRIDE keyword where the value is given in the number of MD steps. For example, if the MD time step is 0.02 ps and STRIDE=2000 will the coefficients be updated every 4 ps. The coefficients will be outputted to the file given by the COEFFS_FILE keyword. How often the coefficients are written to this file is controlled by the COEFFS_OUTPUT keyword.</p>
<p>If the VES bias employs a dynamic target distribution that needs to be iteratively updated (e.g. <a class="el" href="_t_d__w_e_l_l_t_e_m_p_e_r_e_d.html">TD_WELLTEMPERED</a>) <a class="el" href="citelist.html#CITEREF_Valsson-JCTC-2015">[109]</a>, you will need to specify the stride for updating the target distribution by using the TARGETDIST_STRIDE keyword where the stride is given in terms coefficient iterations. For example if the MD time step is 0.02 ps and STRIDE=1000, such that the coefficients are updated every 2 ps, will TARGETDIST_STRIDE=500 mean that the target distribution will be updated every 1000 ps.</p>
<p>The output of the free energy surfaces and biases is controlled by the FES_OUTPUT and the BIAS_OUTPUT keywords. It is also possible to output one-dimensional projections of the free energy surfaces by using the FES_PROJ_OUTPUT keyword but for that to work you will need to select for which argument to do the projections by using the numbered PROJ_ARG keyword in the VES bias that is optimized. You can also output dynamic target distributions by using the TARGETDIST_OUTPUT and TARGETDIST_PROJ_OUTPUT keywords.</p>
<p>It is possible to start the optimization from some initial set of coefficients that have been previously obtained by using the INITIAL_COEFFS keyword.</p>
<p>When restarting simulations it should be sufficient to put the <a class="el" href="_r_e_s_t_a_r_t.html">RESTART</a> action in the beginning of the input files (or some MD codes the PLUMED should automatically detect if it is a restart run) and keep the same input as before The restarting of the optimization should be automatic as the optimizer will then read in the coefficients from the file given in COEFFS_FILE. For dynamic target distribution the code will also read in the final target distribution from the previous run (which is always outputted even if the TARGETDIST_OUTPUT keyword is not used).</p>
<p>This optimizer supports the usage of multiple walkers where different copies of the system share the same bias potential (i.e. coefficients) and cooperatively sample the averages needed for the gradient and Hessian. This can significantly help with convergence in difficult cases. It is of course best to start the different copies from different positions in CV space. To activate this option you just need to add the MULTIPLE_WALKERS flag. Note that this is only supported if the MD code support running multiple replicas connected via MPI.</p>
<p>The optimizer supports the usage of a so-called mask file that can be used to employ different step sizes for different coefficients and/or deactivate the optimization of certain coefficients (by putting values of 0.0). The mask file is read in by using the MASK_FILE keyword and should be in the same format as the coefficient file. It is possible to generate a template mask file by using the OUTPUT_MASK_FILE keyword.</p>
<dl class="section user"><dt>Examples</dt><dd></dd></dl>
<p>In the following input we employ an averaged stochastic gradient decent with a fixed step size of 1.0 and update the coefficient every 1000 MD steps (e.g. every 2 ps if the MD time step is 0.02 ps). The coefficient are outputted to the coefficients.data every 50 iterations while the FES and bias is outputted to files every 500 iterations (e.g. every 1000 ps). </p>
<div style="width: 90%; float:left" id="value_details_eg1"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested on master" /></div><pre style="width: 97%;" class="fragment">
<b name="eg1phi" onclick='showPath("eg1","eg1phi")'>phi: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_t_o_r_s_i_o_n.html" style="color:green">TORSION</a> <div class="tooltip">ATOMS<div class="right">the four atoms involved in the torsional angle <i></i></div></div>=5,7,9,15 <span style="display:none;" id="eg1phi">The TORSION action with label <b>phi</b> calculates a single scalar value</span>
<b name="eg1bf1" onclick='showPath("eg1","eg1bf1")'>bf1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_b_f__f_o_u_r_i_e_r.html" style="color:green">BF_FOURIER</a> <div class="tooltip">ORDER<div class="right"><b>compulsory keyword </b>
The order of the basis function expansion. <i></i></div></div>=5 <div class="tooltip">MINIMUM<div class="right"><b>compulsory keyword </b>
The minimum of the interval on which the basis functions are defined. <i></i></div></div>=-pi <div class="tooltip">MAXIMUM<div class="right"><b>compulsory keyword </b>
The maximum of the interval on which the basis functions are defined. <i></i></div></div>=pi <span style="display:none;" id="eg1bf1">The BF_FOURIER action with label <b>bf1</b></span>
<b name="eg1ves1" onclick='showPath("eg1","eg1ves1")'>ves1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_v_e_s__l_i_n_e_a_r__e_x_p_a_n_s_i_o_n.html" style="color:green">VES_LINEAR_EXPANSION</a> ...
   <div class="tooltip">ARG<div class="right"><b>compulsory keyword </b>
the labels of the scalars on which the bias will act <i></i></div></div>=<b name="eg1phi">phi</b> 
   <div class="tooltip">BASIS_FUNCTIONS<div class="right"><b>compulsory keyword </b>
the label of the one dimensional basis functions that should be used. <i></i></div></div>=<b name="eg1bf1">bf1</b> 
   
   <div class="tooltip">TEMP<div class="right">the system temperature - this is needed if the MD code does not pass the temperature
to PLUMED. <i></i></div></div>=300.0 
   <div class="tooltip">GRID_BINS<div class="right">the number of bins used for the grid. <i></i></div></div>=100 
...<span style="display:none;" id="eg1ves1">The VES_LINEAR_EXPANSION action with label <b>ves1</b> calculates the following quantities:
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr><td width="5%%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr>
<tr><td width="5%%">ves1.bias</td><td>the instantaneous value of the bias potential</td></tr>
<tr><td width="5%%">ves1.force2</td><td>the instantaneous value of the squared force due to this bias potential.</td></tr>
</table>
</span>
<b name="eg1o1" onclick='showPath("eg1","eg1o1")'>o1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_o_p_t__a_v_e_r_a_g_e_d__s_g_d.html" style="color:green">OPT_AVERAGED_SGD</a> ...
   <div class="tooltip">BIAS<div class="right"><b>compulsory keyword </b>
the label of the VES bias to be optimized <i></i></div></div>=<b name="eg1ves1">ves1</b> 
   <div class="tooltip">STRIDE<div class="right"><b>compulsory keyword </b>
the frequency of updating the coefficients given in the number of MD steps. <i></i></div></div>=1000 
   
   <div class="tooltip">STEPSIZE<div class="right"><b>compulsory keyword </b>
the step size used for the optimization <i></i></div></div>=1.0 
   <div class="tooltip">COEFFS_FILE<div class="right"><b>compulsory keyword ( default=coeffs.data )</b>
the name of output file for the coefficients <i></i></div></div>=coefficients.data 
   <div class="tooltip">COEFFS_OUTPUT<div class="right"><b>compulsory keyword ( default=100 )</b>
how often the coefficients should be written to file. <i></i></div></div>=50 
   <div class="tooltip">FES_OUTPUT<div class="right">how often the FES(s) should be written out to file. <i></i></div></div>=500 
   <div class="tooltip">BIAS_OUTPUT<div class="right">how often the bias(es) should be written out to file. <i></i></div></div>=500 
...<span style="display:none;" id="eg1o1">The OPT_AVERAGED_SGD action with label <b>o1</b></span>
</pre>
<p>In the following example we employ a well-tempered target distribution that is updated every 500 iterations (e.g. every 1000 ps). The target distribution is also output to a file every 2000 iterations (the TARGETDIST_OUTPUT keyword). Here we also employ MULTIPLE_WALKERS flag to enable the usage of multiple walkers. </p>
<div style="width: 90%; float:left" id="value_details_eg2"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><img src="https://img.shields.io/badge/master-passing-green.svg" alt="tested on master" /></div><pre style="width: 97%;" class="fragment">
<span style="color:blue">#SETTINGS NREPLICAS=2</span>
<b name="eg2phi" onclick='showPath("eg2","eg2phi")'>phi: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_t_o_r_s_i_o_n.html" style="color:green">TORSION</a> <div class="tooltip">ATOMS<div class="right">the four atoms involved in the torsional angle <i></i></div></div>=5,7,9,15 <span style="display:none;" id="eg2phi">The TORSION action with label <b>phi</b> calculates a single scalar value</span>
<b name="eg2psi" onclick='showPath("eg2","eg2psi")'>psi: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_t_o_r_s_i_o_n.html" style="color:green">TORSION</a> <div class="tooltip">ATOMS<div class="right">the four atoms involved in the torsional angle <i></i></div></div>=7,9,15,17 <span style="display:none;" id="eg2psi">The TORSION action with label <b>psi</b> calculates a single scalar value</span>
<b name="eg2bf1" onclick='showPath("eg2","eg2bf1")'>bf1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_b_f__f_o_u_r_i_e_r.html" style="color:green">BF_FOURIER</a> <div class="tooltip">ORDER<div class="right"><b>compulsory keyword </b>
The order of the basis function expansion. <i></i></div></div>=5 <div class="tooltip">MINIMUM<div class="right"><b>compulsory keyword </b>
The minimum of the interval on which the basis functions are defined. <i></i></div></div>=-pi <div class="tooltip">MAXIMUM<div class="right"><b>compulsory keyword </b>
The maximum of the interval on which the basis functions are defined. <i></i></div></div>=pi <span style="display:none;" id="eg2bf1">The BF_FOURIER action with label <b>bf1</b></span>
<b name="eg2bf2" onclick='showPath("eg2","eg2bf2")'>bf2: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_b_f__f_o_u_r_i_e_r.html" style="color:green">BF_FOURIER</a> <div class="tooltip">ORDER<div class="right"><b>compulsory keyword </b>
The order of the basis function expansion. <i></i></div></div>=4 <div class="tooltip">MINIMUM<div class="right"><b>compulsory keyword </b>
The minimum of the interval on which the basis functions are defined. <i></i></div></div>=-pi <div class="tooltip">MAXIMUM<div class="right"><b>compulsory keyword </b>
The maximum of the interval on which the basis functions are defined. <i></i></div></div>=pi <span style="display:none;" id="eg2bf2">The BF_FOURIER action with label <b>bf2</b></span>
<b name="eg2td1" onclick='showPath("eg2","eg2td1")'>td1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_t_d__w_e_l_l_t_e_m_p_e_r_e_d.html" style="color:green">TD_WELLTEMPERED</a> <div class="tooltip">BIASFACTOR<div class="right"><b>compulsory keyword </b>
The bias factor used for the well-tempered distribution. <i></i></div></div>=10 <span style="display:none;" id="eg2td1">The TD_WELLTEMPERED action with label <b>td1</b></span>
<b name="eg2ves1" onclick='showPath("eg2","eg2ves1")'>ves1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_v_e_s__l_i_n_e_a_r__e_x_p_a_n_s_i_o_n.html" style="color:green">VES_LINEAR_EXPANSION</a> ...
   <div class="tooltip">ARG<div class="right"><b>compulsory keyword </b>
the labels of the scalars on which the bias will act <i></i></div></div>=<b name="eg2phi">phi</b>,<b name="eg2psi">psi</b> 
   <div class="tooltip">BASIS_FUNCTIONS<div class="right"><b>compulsory keyword </b>
the label of the one dimensional basis functions that should be used. <i></i></div></div>=<b name="eg2bf1">bf1</b>,<b name="eg2bf2">bf2</b> 
   
   <div class="tooltip">TEMP<div class="right">the system temperature - this is needed if the MD code does not pass the temperature
to PLUMED. <i></i></div></div>=300.0 
   <div class="tooltip">GRID_BINS<div class="right">the number of bins used for the grid. <i></i></div></div>=100,100 
   <div class="tooltip">TARGET_DISTRIBUTION<div class="right">the label of the target distribution to be used. <i></i></div></div>=<b name="eg2td1">td1</b> 
   <div class="tooltip">PROJ_ARG1<div class="right">arguments for doing projections of the FES or the target distribution.. <i></i></div></div>=<b name="eg2phi">phi</b> 
   <div class="tooltip">PROJ_ARG2<div class="right">arguments for doing projections of the FES or the target distribution.. <i></i></div></div>=<b name="eg2psi">psi</b> 
...<span style="display:none;" id="eg2ves1">The VES_LINEAR_EXPANSION action with label <b>ves1</b> calculates the following quantities:
<table  align="center" frame="void" width="95%%" cellpadding="5%%">
<tr><td width="5%%"><b> Quantity </b>  </td><td><b> Description </b> </td></tr>
<tr><td width="5%%">ves1.bias</td><td>the instantaneous value of the bias potential</td></tr>
<tr><td width="5%%">ves1.force2</td><td>the instantaneous value of the squared force due to this bias potential.</td></tr>
</table>
</span>
<b name="eg2o1" onclick='showPath("eg2","eg2o1")'>o1: </b><a href="https://www.plumed.org/doc-master/user-doc/html/_o_p_t__a_v_e_r_a_g_e_d__s_g_d.html" style="color:green">OPT_AVERAGED_SGD</a> ...
   <div class="tooltip">BIAS<div class="right"><b>compulsory keyword </b>
the label of the VES bias to be optimized <i></i></div></div>=<b name="eg2ves1">ves1</b> 
   <div class="tooltip">STRIDE<div class="right"><b>compulsory keyword </b>
the frequency of updating the coefficients given in the number of MD steps. <i></i></div></div>=1000 
   
   <div class="tooltip">STEPSIZE<div class="right"><b>compulsory keyword </b>
the step size used for the optimization <i></i></div></div>=1.0 
   <div class="tooltip">MULTIPLE_WALKERS<div class="right">( default=off ) if optimization is to be performed using multiple walkers connected
via MPI <i></i></div></div> 
   <div class="tooltip">COEFFS_FILE<div class="right"><b>compulsory keyword ( default=coeffs.data )</b>
the name of output file for the coefficients <i></i></div></div>=coefficients.data 
   <div class="tooltip">COEFFS_OUTPUT<div class="right"><b>compulsory keyword ( default=100 )</b>
how often the coefficients should be written to file. <i></i></div></div>=50 
   <div class="tooltip">FES_OUTPUT<div class="right">how often the FES(s) should be written out to file. <i></i></div></div>=500 
   <div class="tooltip">FES_PROJ_OUTPUT<div class="right">how often the projections of the FES(s) should be written out to file. <i></i></div></div>=500 
   <div class="tooltip">BIAS_OUTPUT<div class="right">how often the bias(es) should be written out to file. <i></i></div></div>=500 
   <div class="tooltip">TARGETDIST_STRIDE<div class="right">stride for updating a target distribution that is iteratively updated during the
optimization. <i></i></div></div>=500 
   <div class="tooltip">TARGETDIST_OUTPUT<div class="right">how often the dynamic target distribution(s) should be written out to file. <i></i></div></div>=2000 
...<span style="display:none;" id="eg2o1">The OPT_AVERAGED_SGD action with label <b>o1</b></span>
</pre>
<dl class="section user"><dt>Glossary of keywords and components</dt><dd></dd></dl>
<dl class="section user"><dt>Description of components</dt><dd></dd></dl>
<p>By default the value of the calculated quantity can be referenced elsewhere in the input file by using the label of the action. Alternatively this Action can be used to calculate the following quantities by employing the keywords listed below. These quantities can be referenced elsewhere in the input by using this Action's label followed by a dot and the name of the quantity required from the list below.</p>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="5%"><b> Quantity </b>  </td><td><b> Description </b>   </td></tr>
<tr>
<td width="15%"><b> .#!value </b> </td><td>a scalar   </td></tr>
</table>
<p>In addition the following quantities can be calculated by employing the keywords listed below</p>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="5%"><b> Quantity </b>  </td><td><b> Keyword </b>  </td><td><b> Description </b>   </td></tr>
<tr>
<td width="5%"><b> gradrms </b> </td><td width="10%"><b> MONITOR_INSTANTANEOUS_GRADIENT </b>  </td><td>the root mean square value of the coefficient gradient. For multiple biases this component is labeled using the number of the bias as gradrms-#.   </td></tr>
<tr>
<td width="5%"><b> gradmax </b> </td><td width="10%"><b> MONITOR_INSTANTANEOUS_GRADIENT </b>  </td><td>the largest absolute value of the coefficient gradient. For multiple biases this component is labeled using the number of the bias as gradmax-#.   </td></tr>
<tr>
<td width="5%"><b> avergradrms </b> </td><td width="10%"><b> MONITOR_AVERAGE_GRADIENT </b>  </td><td>the root mean square value of the averaged coefficient gradient. For multiple biases this component is labeled using the number of the bias as gradrms-#.   </td></tr>
<tr>
<td width="5%"><b> avergradmax </b> </td><td width="10%"><b> MONITOR_AVERAGE_GRADIENT </b>  </td><td>the largest absolute value of the averaged coefficient gradient. For multiple biases this component is labeled using the number of the bias as gradmax-#.   </td></tr>
</table>
<dl class="section user"><dt>Compulsory keywords</dt><dd></dd></dl>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="15%"><b> BIAS </b> </td><td>the label of the VES bias to be optimized   </td></tr>
<tr>
<td width="15%"><b> STRIDE </b> </td><td>the frequency of updating the coefficients given in the number of MD steps.   </td></tr>
<tr>
<td width="15%"><b> COEFFS_FILE </b> </td><td>( default=coeffs.data ) the name of output file for the coefficients   </td></tr>
<tr>
<td width="15%"><b> COEFFS_OUTPUT </b> </td><td>( default=100 ) how often the coefficients should be written to file. This parameter is given as the number of iterations.   </td></tr>
<tr>
<td width="15%"><b> STEPSIZE </b> </td><td>the step size used for the optimization   </td></tr>
</table>
<dl class="section user"><dt>Options</dt><dd></dd></dl>
<table align="center" frame="void" width="95%%" cellpadding="5%%">
<tr>
<td width="15%"><b> MONITOR_INSTANTANEOUS_GRADIENT </b> </td><td>( default=off ) if quantities related to the instantaneous gradient should be outputted.   </td></tr>
<tr>
<td width="15%"><b> MULTIPLE_WALKERS </b> </td><td>( default=off ) if optimization is to be performed using multiple walkers connected via MPI   </td></tr>
<tr>
<td width="15%"><b> START_OPTIMIZATION_AFRESH </b> </td><td>( default=off ) if the iterations should be started afresh when a restart has been triggered by the RESTART keyword or the MD code.   </td></tr>
<tr>
<td width="15%"><b> MONITOR_AVERAGE_GRADIENT </b> </td><td><p class="starttd">( default=off ) if the averaged gradient should be monitored and quantities related to it should be outputted.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td width="15%"><b> COEFFS_FMT </b> </td><td>specify format for coefficient file(s) (useful for decrease the number of digits in regtests)   </td></tr>
<tr>
<td width="15%"><b> COEFFS_SET_ID_PREFIX </b> </td><td>suffix to add to the filename given in FILE to identify the bias, should only be given if a single filename is given in FILE when optimizing multiple biases.   </td></tr>
<tr>
<td width="15%"><b> INITIAL_COEFFS </b> </td><td>the name(s) of file(s) with the initial coefficients   </td></tr>
<tr>
<td width="15%"><b> TARGETDIST_AVERAGES_FILE </b> </td><td>the name of output file for the target distribution averages. By default it is targetdist-averages.data.   </td></tr>
<tr>
<td width="15%"><b> TARGETDIST_AVERAGES_OUTPUT </b> </td><td>how often the target distribution averages should be written out to file. Note that the value is given in terms of coefficient iterations. If no value is given are the averages only written at the beginning of the optimization   </td></tr>
<tr>
<td width="15%"><b> BIAS_OUTPUT </b> </td><td>how often the bias(es) should be written out to file. Note that the value is given in terms of coefficient iterations.   </td></tr>
<tr>
<td width="15%"><b> FES_OUTPUT </b> </td><td>how often the FES(s) should be written out to file. Note that the value is given in terms of coefficient iterations.   </td></tr>
<tr>
<td width="15%"><b> FES_PROJ_OUTPUT </b> </td><td>how often the projections of the FES(s) should be written out to file. Note that the value is given in terms of coefficient iterations.   </td></tr>
<tr>
<td width="15%"><b> RESTART </b> </td><td>allows per-action setting of restart (YES/NO/AUTO)   </td></tr>
<tr>
<td width="15%"><b> UPDATE_FROM </b> </td><td>Only update this action from this time   </td></tr>
<tr>
<td width="15%"><b> UPDATE_UNTIL </b> </td><td>Only update this action until this time   </td></tr>
<tr>
<td width="15%"><b> MASK_FILE </b> </td><td>read in a mask file which allows one to employ different step sizes for different coefficients and/or deactivate the optimization of certain coefficients (by putting values of 0.0). One can write out the resulting mask by using the OUTPUT_MASK_FILE keyword.   </td></tr>
<tr>
<td width="15%"><b> OUTPUT_MASK_FILE </b> </td><td>Name of the file to write out the mask resulting from using the MASK_FILE keyword. Can also be used to generate a template mask file.   </td></tr>
<tr>
<td width="15%"><b> MONITOR_AVERAGES_GRADIENT_EXP_DECAY </b> </td><td>use an exponentially decaying averaging with a given time constant when monitoring the averaged gradient   </td></tr>
<tr>
<td width="15%"><b> TARGETDIST_STRIDE </b> </td><td>stride for updating a target distribution that is iteratively updated during the optimization. Note that the value is given in terms of coefficient iterations.   </td></tr>
<tr>
<td width="15%"><b> TARGETDIST_OUTPUT </b> </td><td>how often the dynamic target distribution(s) should be written out to file. Note that the value is given in terms of coefficient iterations.   </td></tr>
<tr>
<td width="15%"><b> TARGETDIST_PROJ_OUTPUT </b> </td><td>how often the projections of the dynamic target distribution(s) should be written out to file. Note that the value is given in terms of coefficient iterations.   </td></tr>
<tr>
<td width="15%"><b> EXP_DECAYING_AVER </b> </td><td>calculate the averaged coefficients using exponentially decaying averaging using the decaying constant given here in the number of iterations   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
<!--    <li class="navelem"><a class="el" href="_add_mod.html">Additional Modules</a></li><li class="navelem"><a class="el" href="_v_e_s.html">Variationally Enhanced Sampling (VES code)</a></li><li class="navelem"><a class="el" href="ves_optimizer.html">Optimizers</a></li>  -->
    <li class="footer">   <!--- Generated by -->
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
