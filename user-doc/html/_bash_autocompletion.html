<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>PLUMED: Using bash autocompletion</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script>
   var redpath = "";
   
   function showPath(eg,name) {
     var i; var y = document.getElementsByName(redpath);
     for (i=0; i < y.length; i++ ) { y[i].style.color="black"; }
     var x = document.getElementsByName(name); redpath=name;
     for (i = 0; i < x.length; i++) { x[i].style.color="red"; }
     var valid="value_details_".concat(eg);
     var valueField = document.getElementById(valid);
     var dataField = document.getElementById(name);
     valueField.innerHTML = dataField.innerHTML;
   }
   function swapInput(name) {
     var btn = document.getElementById(name + "_button");
     var mydiv = document.getElementById("input_" + name);
     if( btn.textContent=="expand shortcuts" ) {
         btn.textContent = "contract shortcuts";
         var dataField = document.getElementById(name + "long");
         mydiv.innerHTML = dataField.innerHTML;
     } else if( btn.textContent=="contract shortcuts" ) {
         btn.textContent = "expand shortcuts";
         var dataField = document.getElementById(name + "short");
         mydiv.innerHTML = dataField.innerHTML;
     }
   }
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table align="center" frame="void" width="98%" cellpadding="2%">
<tbody>
<tr style="height: 30px;">
<td valign="center"> &nbsp; <img src="pigeon.png" width="120"/></td>
<td style="padding-left: 0.2em;" width="74%"> <a href="http://www.plumed.org"> <img src="logo.png" width="400" /> </td>
<td style="padding-left: 0.2em;" align="right"> <a href="../../developer-doc/html/index.html"> <img src="user-logo.png" width="180" /> </a> </td>
</tr>
</tbody>
</table>
<!--
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PLUMED
   &#160;<span id="projectnumber">2.11.0-dev</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
-->
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_bash_autocompletion.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using bash autocompletion </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>When possible, PLUMED tries to install bash autocompletion so that you do not have to do anything. Just use the <code>&lt;TAB&gt;</code> key to complete plumed commands (e.g. <code>plumed dr&lt;TAB&gt;</code>) or even options (e.g. <code>plumed driver --i&lt;TAB&gt;</code>). In case this does not work, you might have to add the following lines to your .bashrc file: </p><pre class="fragment">_plumed() { eval "$(plumed --no-mpi completion 2&gt;/dev/null)";}
complete -F _plumed -o default plumed
</pre><dl class="section user"><dt>Effect</dt><dd></dd></dl>
<p>When typing on the the shell you should observe the following behavior. </p><pre class="fragment">&gt; plumed &lt;TAB&gt;
</pre><p> will autocomplete with the names of the available PLUMED commands (e.g. <code>driver</code>, <code>help</code>, etc). </p><pre class="fragment">&gt; plumed -&lt;TAB&gt;
</pre><p> will autocomplete with the available PLUMED options (e.g. <code>--no-mpi</code>, etc).</p>
<p>PLUMED also knows which are the options available for each command (e.g. <code>plumed driver --natoms</code>). So, the following </p><pre class="fragment">&gt; plumed driver -&lt;TAB&gt;
</pre><p> (notice the <code>-</code>) will autocomplete to the options of <code>plumed driver</code>. On the contrary </p><pre class="fragment">&gt; plumed driver --ixtc &lt;TAB&gt;
</pre><p> (notice the there is no <code>-</code> before <code>&lt;TAB&gt;</code>) will autocomplete to the files in the current directory.</p>
<p>Also notice that every time you use the <code>&lt;TAB&gt;</code> key to autocomplete the command <code>plumed</code> will be invoked. This should allow the correct commands and options to be reported depending on the exact <code>plumed</code> command in the current execution path. For instance, if you have multiple PLUMED versions installed with env modules, you should be able to see the commands available in the currently loaded version. Clearly, this feature will only be available if <code>plumed</code> can run on this machine (that is: will not work if you are cross compiling). This is not a problem since you are not expecting to run the <code>plumed</code> command in this specific case.</p>
<dl class="section user"><dt>Technicalities</dt><dd></dd></dl>
<p>At configure time if the variable <code>BASH_COMPLETION_DIR</code> is defined it will be used to decide where PLUMED autocompletion should be installed. Otherwise, configure will look for the presence of the <code>bash-completion</code> package and, in case it is installed on the same prefix as PLUMED, also PLUMED autocompletion will be installed. Finally, if none of these two conditions are satisfied, autocompletion will not be enabled. You will have to change your bashrc file once adding the following lines: </p><pre class="fragment">_plumed() { eval "$(plumed --no-mpi completion 2&gt;/dev/null)";}
complete -F _plumed -o default plumed
</pre><p> The command <code>plumed completion</code> just writes on its standard output the body of a bash function that is then used by bash to construct the autocompletion. The <code>--no-mpi</code> flag makes it more likely that the command can be executed correctly e.g. when you are on the login node of a cluster and PLUMED was compiled with MPI but the login node does not support MPI. In other cases, it is harmless. The <code>-o default</code> options will make sure that if <code>plumed --no-mpi completion</code> returns an error the default bash completion will be used. This is what will happen if you load an older PLUMED version for which the <code>completion</code> command is not available yet. In future PLUMED versions the <code>plumed completion</code> command might return more sophisticated functions. You should be able to benefit of these features without ever changing your bash configuration file again.</p>
<dl class="section user"><dt>Multiple versions and suffixes</dt><dd></dd></dl>
<p>In case you have multiple versions of PLUMED installed in separate env modules there is nothing more to do. However, if you have have multiple versions of PLUMED installed with different suffixes you should consistently add more lines to your profile file. For instance, if you installed two executables named <code>plumed</code> and <code>plumed_mpi</code> your configuration file should look like: </p><pre class="fragment">_plumed() { eval "$(plumed --no-mpi completion 2&gt;/dev/null)";}
complete -F _plumed -o default plumed
_plumed_mpi() { eval "$(plumed_mpi --no-mpi completion 2&gt;/dev/null)";}
complete -F _plumed_mpi -o default plumed_mpi
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
<!--    <li class="navelem"><a class="el" href="_miscellaneous.html">Miscellaneous</a></li>  -->
    <li class="footer">   <!--- Generated by -->
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
